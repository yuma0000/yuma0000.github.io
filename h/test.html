
<script>

window.alert("許可押してね")

var today = new Date();
var month = today.getMonth() + 1;
var day = today.getDate();

navigator.geolocation.getCurrentPosition( (position) => {
    var lat  = position.coords.latitude;
    var lng  = position.coords.longitude;
    var accu = position.coords.accuracy;
    displayData(lat, lng, accu);
}, (error) => {
}, {
    enableHighAccuracy: true
});

function displayData(lat, lng, accu) {

//document.write
var date = (month + "<br>" + day + "<br><br>" + lat + "<br>" + lng);

}

function doGet(e) {
  var rowData = {};  

  if (e.parameter == undefined) {

      var getvalue = "undefined"

      rowData.value = getvalue;
      var result = JSON.stringify(rowData);
      return ContentService.createTextOutput(result);

  }else{

      var id = '1nJeV41RpoUOAZPRfmSkll_wl-KT_A4KHYrRoouuWnaI';

      var sheet = SpreadsheetApp.openById(id).getSheetByName("シート1");

      var array = [date];

      sheet.appendRow(array);

      var getvalue = "ok"

      rowData.value = getvalue;
      var result = JSON.stringify(rowData);
      return ContentService.createTextOutput(result);

  }
}

</script>
